<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지도뿌셔 - 대한민국, 어디까지 가봤니?</title>
    <link rel="stylesheet" href="src/css/index.css" />
  </head>
  <body>
    <div class="header-container">
      <img src="src/images/back.png" class="back" onclick="goMenu('menu.html')" alt=""/>
      <span onclick="goMenu('mapNames.html')">지도뿌셔</span>
      <img src="src/images/menu_icon.png" class="menu" onclick="goMenu('menu.html')" alt=""/>
    </div>
    <div class="storage-container">
      <div class="backup-info-area">
        <span>백업시 주의사항</span>
        <div class="backup-sub-area">
          <ul>
            <li>
              - 지도뿌셔는 브라우저DB로 관리돼요.
            </li>
            <li class="desc">
              <em class="star">*</em> 핸드폰 초기화 : 백업 파일을 다른 저장매체로 옮겨주세요.
              <br>
              <em class="star">*</em> 기기 변경 : 변경 기기로 백업 파일을 옮겨주세요.
            </li>
          </ul>
        </div>
      </div>
      <div class="backup-exam-area">
        <span>백업 방법</span>
        <div class="backup-sub-area">
          <ul>
            <li>
              1. 하단 [백업하기] 버튼을 눌러주세요.
            </li>
            <li>
              2. 백업과정이 진행돼요.
            </li>
            <li class="desc">
              <em class="star">*</em> 앱을 종료하거나 다른 앱으로 이동하지 말고 잠시 기다려주세요.
              <br>
              <em class="star">*</em> 저장된 데이터량에 따라 시간이 다소 소요될 수 있어요.
            </li>
            <li>
              3. 백업이 완료되면 백업받은 파일을 클라우드나 메일, 메신저 등을 이용해 다른 저장매체로 옮겨주세요.
            </li>
            <li class="desc">
              <em class="star">*</em> 백업받은 파일은 JSON 확장자를 가져요.
              <br>
              <em class="star">*</em> 해당 확장자로 파일 전송이 안 될 경우 압축 후 진행해주세요.
            </li>
          </ul>
        </div>
      </div>
      <div class="backup-detail-area" id="backup-detail-area">
        <div class="detail-sub-area">
          <ul class="backup-detail-ul">
            <li>
              <div class="tit">백업일시</div>
              <div id="backup-date">-</div>
            </li>
            <li>
              <div class="tit">백업기기</div>
              <div id="backup-device">-</div>
            </li>
            <li>
              <div class="tit">백업데이터용량</div>
              <div id="backup-capacity">-</div>
            </li>
            <li>
              <div class="tit">백업파일명</div>
              <div id="backup-path">-</div>
            </li>
          </ul>
        </div>
      </div>
      <div class="backup-btn-area" id="backup-btn-area">
        <div class="backup-btn" onclick="startBackup()">백업하기</div>
      </div>
    </div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="src/js/index.js"></script>
  </body>
</html>
<script>
  document.addEventListener('DOMContentLoaded', async function() {
    const backupInfo = JSON.parse(localStorage.getItem('backupInfo'));

    if (backupInfo) {

      const date = document.getElementById('backup-date');
      date.innerText = `${backupInfo.date}`;
      const device = document.getElementById('backup-device');
      device.innerText = `${backupInfo.device}`;
      const capacity = document.getElementById('backup-capacity');
      capacity.innerText = `${backupInfo.fileSize}`;
      const path = document.getElementById('backup-path');
      path.innerText = `${backupInfo.fileName}`;

    }
  });
</script>
